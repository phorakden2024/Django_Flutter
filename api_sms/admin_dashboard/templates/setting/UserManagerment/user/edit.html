{% extends "base.html" %} {% block title %}User{% endblock %} {% block header %}
{% if request.resolver_match.view_name == 'view_user' %} View User {% else %}
Edit User {% endif %} {% endblock %} {% block content %}

<div class="container">
  <div class="card shadow-sm">
    <div
      class="d-flex justify-content-between align-items-center bg-primary text-white p-3 rounded"
    >
      {% if request.resolver_match.view_name == 'view_user' %}
      <h4 class="mb-0">View User</h4>
      {% else %}
      <h4 class="mb-0">Edit User</h4>
      {% endif %}
      <a href="{% url 'user' %}" class="btn btn-outline-light btn-mb">X</a>
    </div>
    <div class="card-body">
      <form action="{% url 'update_user' user.id %}" method="POST">
        {% csrf_token %}
        <!-- Username -->
        <div class="form-group">
          <label>Username</label>
          <input
            type="text"
            name="username"
            value="{{ user.username }}"
            class="form-control"
            required
          />
        </div>
        <div class="row">
          <!-- First Name -->
          <div class="form-group col-md-6">
            <label>First Name</label>
            <input
              type="text"
              name="first_name"
              value="{{ user.first_name }}"
              class="form-control"
            />
          </div>

          <!-- Last Name -->
          <div class="form-group col-md-6">
            <label>Last Name</label>
            <input
              type="text"
              name="last_name"
              value="{{ user.last_name }}"
              class="form-control"
            />
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label>Email</label>
          <input
            type="email"
            name="email"
            value="{{ user.email }}"
            class="form-control"
          />
        </div>

        <!-- Password -->
        <div class="form-group">
          <label>Password</label>
          <input
            type="password"
            name="password"
            class="form-control"
            required
            value="{{user.password}}"
            disabled
          />
        </div>
        <!-- Checkboxes Row -->
        <div class="form-row">
          <!-- Is Staff -->
          <div class="form-group col-md-4">
            <div class="form-check mt-4">
              <input
                class="form-check-input"
                type="checkbox"
                name="is_staff"
                id="is_staff"
                {%
                if
                user.is_staff
                %}checked{%
                endif
                %}
              />
              <label class="form-check-label" for="is_staff"> Is Staff </label>
            </div>
          </div>

          <!-- Is Superuser -->
          <div class="form-group col-md-4">
            <div class="form-check mt-4">
              <input
                class="form-check-input"
                type="checkbox"
                name="is_superuser"
                id="is_superuser"
                {%
                if
                user.is_superuser
                %}checked{%
                endif
                %}
              />
              <label class="form-check-label" for="is_superuser">
                Is Superuser
              </label>
            </div>
          </div>

          <!-- Is Active -->
          <div class="form-group col-md-4">
            <div class="form-check mt-4">
              <input
                class="form-check-input"
                type="checkbox"
                name="is_active"
                id="is_active"
                {%
                if
                user.is_active
                %}checked{%
                endif
                %}
              />
              <label class="form-check-label" for="is_active">
                Is Active
              </label>
            </div>
          </div>
        </div>
        <!-- Submit Button -->
        {% if request.resolver_match.view_name != 'view_user' %}
        <button type="submit" class="btn btn-warning btn-block">
          Update User
        </button>
        {% endif %}
      </form>
    </div>
  </div>
</div>

{% endblock %}
